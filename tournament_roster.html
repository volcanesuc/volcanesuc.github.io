<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Roster del Torneo ‚Äì Volcanes Ultimate</title>

  <!-- Bootstrap -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <!-- Bootstrap Icons -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
  />

  <!-- Estilos globales -->
  <link rel="stylesheet" href="./css/main.css" />
  <link rel="stylesheet" href="./css/dashboard.css" />

  <!-- Estilos de esta pantalla -->
  <link rel="stylesheet" href="./css/tournament_roster.css" />
</head>

<body class="loading">

  <!-- HEADER -->
  <div id="app-header"></div>

  <main class="container py-4">

    <!-- Top bar -->
    <div class="mb-3">
      <h1 class="page-title mb-1" id="pageTitle">‚Äî</h1>
      <div class="text-muted" id="pageSubtitle">‚Äî</div>
    </div>

    <!-- Tournament hero -->
    <section class="roster-hero mb-3">
      <div class="d-flex justify-content-between align-items-center flex-wrap gap-3">

        <!-- Info torneo -->
        <div>
          <div class="roster-hero__title d-flex align-items-center gap-2">
            <span id="tName">‚Äî</span>
            <span class="badge text-bg-light border" id="tDates">‚Äî</span>
          </div>

          <div class="text-muted small" id="tMeta">‚Äî</div>

          <div class="d-flex gap-2 flex-wrap mt-2 align-items-center">
            <span class="pill" id="teamFeePill">Team fee: ‚Äî</span>

            <button
              class="btn btn-sm btn-outline-secondary"
              id="toggleTeamFeeBtn"
              type="button"
              title="Cambiar estado del fee del equipo"
            >
              <i class="bi bi-cash-coin"></i>
            </button>
          </div>
        </div>

        <!-- Acciones -->
        <div class="d-flex gap-2">
          <a
            class="btn btn-sm btn-outline-primary"
            id="editTournamentBtn"
            href="#"
          >
            <i class="bi bi-pencil"></i>
            Editar
          </a>
        </div>
      </div>
    </section>

    <!-- Errors -->
    <div class="alert alert-warning d-none" id="errorBox"></div>

    <!-- Context hint -->
    <section class="mb-3">
      <div class="text-muted small d-flex align-items-center gap-2">
        <i class="bi bi-people"></i>
        Administra convocados, confirmados y pagos
      </div>
    </section>

    <!-- Layout: 2 columnas -->
    <section class="row g-3">

      <!-- Roster list -->
      <div class="col-12 col-xl-7">
        <div class="panel">

          <!-- Header roster -->
          <div class="d-flex justify-content-between align-items-start flex-wrap gap-3">
            <div>
              <div class="panel__title" id="rosterTitle">‚Äî</div>

              <!-- Stats -->
              <div
                class="panel__sub d-flex gap-2 flex-wrap align-items-center mt-1"
                id="rosterStats"
              >
                <span class="badge text-bg-light border" title="Total de jugadores">
                  üë• <strong id="statTotal">‚Äî</strong>
                </span>

                <span class="badge text-bg-light border" title="Femenino / Masculino">
                  ‚ôÄ <strong id="statF">‚Äî</strong> ¬∑ ‚ôÇ <strong id="statM">‚Äî</strong>
                </span>

                <span class="badge text-bg-light border" title="Handlers">
                  üéØ <strong id="statHandlers">‚Äî</strong>
                </span>

                <span class="badge text-bg-light border" title="Cutters">
                  üèÉ <strong id="statCutters">‚Äî</strong>
                </span>
              </div>
            </div>

            <!-- Filtros -->
            <div class="roster-filters">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <div class="fw-semibold">
                  <i class="bi bi-funnel"></i>
                  Filtros
                </div>

                <button
                  class="btn btn-sm btn-outline-secondary d-none"
                  id="clearLegendFilters"
                  type="button"
                >
                  Limpiar
                </button>
              </div>

              <div
                class="roster-filters__chips d-flex gap-2 flex-wrap"
                id="rosterLegend"
                role="group"
                aria-label="Filtros del roster"
              >
                <button
                  type="button"
                  class="pill pill--yellow legend-filter"
                  data-filter="status:confirmado"
                  aria-pressed="false"
                >
                  <i class="bi bi-check2-circle"></i> Confirmado
                </button>

                <button
                  type="button"
                  class="pill legend-filter"
                  data-filter="status:convocado"
                  aria-pressed="false"
                >
                  <i class="bi bi-person-check"></i> Convocado
                </button>

                <button
                  type="button"
                  class="pill pill--warn legend-filter"
                  data-filter="fee:pendiente"
                  aria-pressed="false"
                >
                  <i class="bi bi-cash-coin"></i> Fee pendiente
                </button>

                <button
                  type="button"
                  class="pill pill--good legend-filter"
                  data-filter="fee:pagado"
                  aria-pressed="false"
                >
                  <i class="bi bi-cash-coin"></i> Fee pagado
                </button>
              </div>
            </div>
          </div>

          <!-- Roster content -->
          <div class="mt-3" id="rosterList"></div>
          <div class="text-muted p-3 d-none" id="rosterEmpty">‚Äî</div>
        </div>
      </div>

      <!-- Players panel -->
      <div class="col-12 col-xl-5">
        <div class="panel">

          <!-- Header -->
          <div class="d-flex justify-content-between align-items-start flex-wrap gap-2">
            <div>
              <div class="panel__title" id="playersTitle">Jugadores</div>
              <div class="panel__sub text-muted" id="playersSubtitle">‚Äî</div>
            </div>

            <span
              class="badge text-bg-light border"
              id="addPanelState"
              title="Disponibles en el panel"
            >
              Disponibles: ‚Äî
            </span>
          </div>

          <!-- Acciones -->
          <div class="mt-3 d-flex gap-2 flex-wrap">
            <button
              class="btn btn-sm btn-outline-primary"
              id="addGuestBtn"
              type="button"
            >
              <i class="bi bi-person-plus"></i>
              Invitado / Pr√©stamo
            </button>
          </div>

          <!-- Search -->
          <div class="mt-3">
            <div class="input-group">
              <span class="input-group-text">
                <i class="bi bi-search"></i>
              </span>
              <input
                class="form-control"
                id="playersSearch"
                placeholder="Buscar jugadores activos..."
              />
            </div>
            <div class="form-text">
              Jugadores disponibles para agregar al roster
            </div>
          </div>

          <!-- Players list -->
          <div class="mt-3" id="playersList"></div>
          <div class="text-muted p-3 d-none" id="playersEmpty">
            No hay jugadores.
          </div>
        </div>
      </div>

    </section>

    <!-- Footer meta -->
    <div class="d-flex align-items-center gap-2 mt-4">
      <i class="bi bi-info-circle text-muted"></i>
      <div class="small text-muted" id="appVersion">v‚Äî</div>
    </div>

  </main>

  <!-- Modal mount -->
  <div id="modalMount"></div>

  <!-- Loader -->
  <div id="loadingOverlay" class="loading-overlay">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Cargando...</span>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Page JS -->
  <script type="module" src="./js/tournament_roster.js"></script>
</body>
</html>
