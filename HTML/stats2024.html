<!DOCTYPE html>
<!-- ==============================
    Project:        Metronic "Asentus" Frontend Freebie - Responsive HTML Template Based On Twitter Bootstrap 3.3.4
    Version:        1.0
    Author:         KeenThemes
    Primary use:    Corporate, Business Themes.
    Email:          support@keenthemes.com
    Follow:         http://www.twitter.com/keenthemes
    Like:           http://www.facebook.com/keenthemes
    Website:        http://www.keenthemes.com
    Premium:        Premium Metronic Admin Theme: http://themeforest.net/item/metronic-responsive-admin-dashboard-template/4021469?ref=keenthemes
================================== -->
<html lang="en" class="no-js">
 <!-- BEGIN HEAD -->
    <head>
        <meta charset="utf-8"/>
        <title>CARTAGLOW 2025</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta content="width=device-width, initial-scale=1" name="viewport"/>
        <meta content="" name="description"/>
        <meta content="" name="author"/>

        <!-- GLOBAL MANDATORY STYLES -->
        <link href="http://fonts.googleapis.com/css?family=Hind:300,400,500,600,700" rel="stylesheet" type="text/css">
        <link href="vendor/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css"/>
        <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>

        <!-- PAGE LEVEL PLUGIN STYLES -->
        <link href="css/animate.css" rel="stylesheet">
        <link href="vendor/swiper/css/swiper.min.css" rel="stylesheet" type="text/css"/>

        <!-- THEME STYLES -->
        <link href="css/layout.min.css" rel="stylesheet" type="text/css"/>

        <!-- Favicon -->
        <link rel="shortcut icon" href="favicon.ico"/>
    </head>
    <!-- END HEAD -->

    <!-- BODY -->
    <body>

        <!--========== HEADER ==========-->
        <header class="header navbar-fixed-top">
            <!-- Navbar -->
            <nav class="navbar" role="navigation">
                <div class="container">
                    <!-- Brand and toggle get grouped for better mobile display -->
                    <div class="menu-container">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="toggle-icon"></span>
                        </button>

                        <!-- Logo -->
                        <div class="logo">
                            <a class="logo-wrap" href="index.html">
                                <img class="logo-img logo-img-main" src="img/logo.png" alt="Cartaglow Logo">
                                <img class="logo-img logo-img-active" src="img/logo-dark.png" alt="Cartaglow Logo">
                            </a>
                        </div>
                        <!-- End Logo -->
                    </div>

                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse nav-collapse">
                        <div class="menu-container">
                            <ul class="navbar-nav navbar-nav-right">
                                <li class="nav-item"><a style="color:#000;" class="nav-item-child nav-item-hover" href="index.html">Inicio</a></li>
                                <li class="nav-item"><a style="color:#000;" class="nav-item-child nav-item-hover">Equipos</a></li>
                                <li class="nav-item"><a style="color:#000;" class="nav-item-child nav-item-hover active">2024</a></li>
                            </ul>
                        </div>
                    </div>
                    <!-- End Navbar Collapse -->
                </div>
            </nav>
            <!-- Navbar -->
        </header>
        <!--========== END HEADER ==========-->


        <div class="content-section" >

            <h1>Estadísticas Cartaglow 2024</h1>
            <p>Resumen completo de la primera edición de Cartaglow: resultados de partidos, tabla de posiciones y estadísticas individuales de todos los jugadores y jugadoras.</p>


            <h2>Tabla de Posiciones</h2>
            <table>
                <tr><th>Equipo</th><th  class="col-narrow" >W</th><th  class="col-narrow" >L</th><th  class="col-narrow" >GF</th><th  class="col-narrow" >GC</th><th class="col-narrow" >GD</th></tr>
                <tr><td>Azul</td><td>3</td><td>1</td><td>17</td><td>8</td><td>9</td></tr>
                <tr><td>Rojo</td><td>3</td><td>1</td><td>17</td><td>15</td><td>2</td></tr>
                <tr><td>Naranja</td><td>2</td><td>2</td><td>20</td><td>14</td><td>6</td></tr>
                <tr><td>Negro</td><td>2</td><td>2</td><td>14</td><td>18</td><td>-4</td></tr>
                <tr><td>Blanco</td><td>0</td><td>4</td><td>9</td><td>22</td><td>-13</td></tr>
            </table>

            <h2>Resultados de los Juegos</h2>
                <h3>Ronda 1</h3>
                <table>
                    <tr><th>Round</th><th>Casa</th><th>Marcador</th><th>Visita</th></tr>
                    <tr><td>R1</td><td>Negro</td><td>1 - <b>6</b></td><td><b>Azul</b></td></tr>
                    <tr><td>R1</td><td><b>Naranja</b></td><td><b>6</b> - 2</td><td>Rojo</td></tr>
                </table>
                <h3>Ronda 2</h3>
                <table>
                    <tr><th>Round</th><th>Casa</th><th>Marcador</th><th>Visita</th></tr>
                    <tr><td>R2</td><td><b>Negro</b></td><td><b>5</b> - 4</td><td>Naranja</td></tr>
                    <tr><td>R2</td><td>Blanco</td><td>3 - <b>7</b></td><td><b>Rojo</b></td></tr>
                </table>
                <h3>Ronda 3</h3>
                <table>
                    <tr><th>Round</th><th>Casa</th><th>Marcador</th><th>Visita</th></tr>
                    <tr><td>R3</td><td><b>Rojo</b></td><td><b>3</b> - 2</td><td>Azul</td></tr>
                    <tr><td>R3</td><td>Blanco</td><td>2 - <b>7</b></td><td><b>Naranja</b></td></tr>
                </table>
                <h3>Ronda 4</h3>
                <table>
                    <tr><th>Round</th><th>Casa</th><th>Marcador</th><th>Visita</th></tr>
                    <tr><td>R4</td><td>Negro</td><td>4 - <b>5</b></td><td><b>Rojo</b></td></tr>
                    <tr><td>R4</td><td>Blanco</td><td>1 - <b>4</b></td><td><b>Azul</b></td></tr>
                </table>
                <h3>Ronda 5</h3>
                <table>
                    <tr><th>Round</th><th>Casa</th><th>Marcador</th><th>Visita</th></tr>
                    <tr><td>R5</td><td>Blanco</td><td>3 - <b>4</b></td><td><b>Negro</b></td></tr>
                    <tr><td>R5</td><td>Naranja</td><td>3 - <b>5</b></td><td><b>Azul</b></td></tr>
                </table>
            </table>

            <div name="Stats individuales">
                <h2>Estadisticas Generales - individuales</h2>
                <p>Usá los filtros para buscar por equipo, género, goles, asistencias o puntos.</p>
                <div class="filters">
                    <label for="teamFilter">Equipo:</label>
                    <select id="teamFilter">
                    <option value="">Todos</option>
                    <option value="Azul">Azul</option>
                    <option value="Rojo">Rojo</option>
                    <option value="Naranja">Naranja</option>
                    <option value="Negro">Negro</option>
                    <option value="Blanco">Blanco</option>
                    </select>

                    <label for="genderFilter">Género:</label>
                    <select id="genderFilter">
                    <option value="">Todos</option>
                    <option value="Masculino">Masculino</option>
                    <option value="Femenino">Femenino</option>
                    </select>

                    <label for="goalsFilter">Min Goles:</label>
                    <select id="goalsFilter">
                    <option value="">Cualquiera</option>
                    <option value="1">1+</option>
                    <option value="3">3+</option>
                    <option value="5">5+</option>
                    </select>

                    <label for="assistsFilter">Min Asistencias:</label>
                    <select id="assistsFilter">
                    <option value="">Cualquiera</option>
                    <option value="1">1+</option>
                    <option value="3">3+</option>
                    <option value="5">5+</option>
                    </select>

            
                </div>

                <table id="statsTable">
                    <thead>
                    <tr>
                        <th data-type="string" data-col="0">Jugador</th>
                        <th data-type="string" data-col="1">Equipo</th>
                        <th data-type="gender" data-col="2">Género</th>
                        <th class="pts-col" data-type="number" data-col="3">PTS</th>
                        <th data-type="number" data-col="4">Goles</th>
                        <th data-type="number" data-col="5">Asistencias</th>
                    </tr>
                    </thead>
                    <tbody>
                    <!-- Datos se cargarán aquí -->
                    </tbody>
                </table>

                <script>
                    let currentSortCol = null;
                    let currentSortDir = 'asc'; // asc o desc

                    async function cargarCSV(url) {
                    const res = await fetch(url);
                    const text = await res.text();
                    const lines = text.trim().split("\n");
                    const tbody = document.querySelector("#statsTable tbody");
                    tbody.innerHTML = ""; // limpio tabla

                    lines.slice(1).forEach(line => {
                        const data = line.split(",");
                        const tr = document.createElement("tr");
                        data.forEach(cell => {
                        const td = document.createElement("td");
                        td.textContent = cell.trim();
                        tr.appendChild(td);
                        });
                        tbody.appendChild(tr);
                    });
                    }

                    function aplicarFiltros() {
                    const team = document.getElementById("teamFilter").value;
                    const gender = document.getElementById("genderFilter").value;
                    const minGoals = parseInt(document.getElementById("goalsFilter").value) || 0;
                    const minAssists = parseInt(document.getElementById("assistsFilter").value) || 0;

                    document.querySelectorAll("#statsTable tbody tr").forEach(row => {
                        const cells = row.querySelectorAll("td");
                        const rowTeam = cells[1].textContent.trim();
                        const rowGender = cells[2].textContent.trim();
                        const pts = parseInt(cells[3].textContent.trim());
                        const goals = parseInt(cells[4].textContent.trim());
                        const assists = parseInt(cells[5].textContent.trim());

                        const visible =
                        (!team || team === rowTeam) &&
                        (!gender || gender === rowGender) &&
                        goals >= minGoals &&
                        assists >= minAssists;

                        row.style.display = visible ? "" : "none";
                    });
                    }

                    function compararCelda(a, b, tipo) {
                    if(tipo === 'number') {
                        return parseInt(a) - parseInt(b);
                    } else if(tipo === 'string') {
                        return a.localeCompare(b);
                    } else if(tipo === 'gender') {
                        // Femenino antes que Masculino
                        const orden = { "Femenino": 0, "Masculino": 1 };
                        return (orden[a] ?? 2) - (orden[b] ?? 2);
                    }
                    return 0;
                    }

                    function ordenarTabla(colIndex, tipo) {
                    const tbody = document.querySelector("#statsTable tbody");
                    const rows = Array.from(tbody.querySelectorAll("tr"));

                    // Si clickeamos la misma columna invertimos el orden
                    if(currentSortCol === colIndex) {
                        currentSortDir = currentSortDir === 'asc' ? 'desc' : 'asc';
                    } else {
                        currentSortCol = colIndex;
                        currentSortDir = 'asc';
                    }

                    // Remover clases de otros headers
                    document.querySelectorAll("th").forEach(th => {
                        th.classList.remove("sorted-asc", "sorted-desc");
                    });
                    // Agregar clase al header actual
                    const th = document.querySelector(`th[data-col='${colIndex}']`);
                    th.classList.add(currentSortDir === 'asc' ? 'sorted-asc' : 'sorted-desc');

                    rows.sort((rowA, rowB) => {
                        const cellA = rowA.cells[colIndex].textContent.trim();
                        const cellB = rowB.cells[colIndex].textContent.trim();
                        let cmp = compararCelda(cellA, cellB, tipo);
                        if(currentSortDir === 'desc') cmp = -cmp;
                        return cmp;
                    });

                    // Reordenar tabla
                    rows.forEach(row => tbody.appendChild(row));
                    }

                    document.addEventListener("DOMContentLoaded", () => {
                    cargarCSV("csv/stats_2024.csv").then(() => {
                        aplicarFiltros();
                        document.querySelectorAll("select").forEach(sel =>
                        sel.addEventListener("change", () => {
                            aplicarFiltros();
                        })
                        );

                        document.querySelectorAll("th").forEach(th => {
                        th.addEventListener("click", () => {
                            const col = parseInt(th.getAttribute("data-col"));
                            const tipo = th.getAttribute("data-type");
                            ordenarTabla(col, tipo);
                        });
                        });
                    });
                    });
                </script>

            </div>
        </div>


        <!--========== FOOTER ==========-->
        <footer class="footer">

            <!-- Copyright -->
            <div class="content container">
                <div class="row">
                    <div class="col-xs-6">
                        <img class="footer-logo" src="img/logo.png" alt="Cartaglow Logo">
                    </div>
                    <div class="col-xs-6 text-right">
                        <p class="margin-b-0"><a class="color-base fweight-700" >Cartaglow</p>
                    </div>
                </div>
                <!--// end row -->
            </div>
            <!-- End Copyright -->
        </footer>
        <!--========== END FOOTER ==========-->


        <!-- Back To Top -->
        <a href="javascript:void(0);" class="js-back-to-top back-to-top">Top</a>

        <!-- JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->
        <!-- CORE PLUGINS -->
        <script src="vendor/jquery.min.js" type="text/javascript"></script>
        <script src="vendor/jquery-migrate.min.js" type="text/javascript"></script>
        <script src="vendor/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>

        <!-- PAGE LEVEL PLUGINS -->
        <script src="vendor/jquery.easing.js" type="text/javascript"></script>
        <script src="vendor/jquery.back-to-top.js" type="text/javascript"></script>
        <script src="vendor/jquery.smooth-scroll.js" type="text/javascript"></script>
        <script src="vendor/jquery.wow.min.js" type="text/javascript"></script>
        <script src="vendor/jquery.parallax.min.js" type="text/javascript"></script>
        <script src="vendor/swiper/js/swiper.jquery.min.js" type="text/javascript"></script>

        <!-- PAGE LEVEL SCRIPTS -->
        <script src="js/layout.min.js" type="text/javascript"></script>
        <script src="js/components/wow.min.js" type="text/javascript"></script>
        <script src="js/components/swiper.min.js" type="text/javascript"></script>


        <style>

    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 40px;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 6px 10px;
      text-align: center;
      font-size: 14px;
    }
    th {
      background-color: #ddd;
    }
    .scroll-table {
      overflow-x: auto;
    }
    .col-narrow {
        width: 90px;
        max-width: 90px;
        white-space: nowrap;
    }
    .content-section {
        padding-top: 120px;
    }
    th.sorted-asc::after {
        content: " ▲";
        }
    th.sorted-desc::after {
        content: " ▼";
    }
  </style>

    </body>
    <!-- END BODY -->
</html>